## 操作系统结构



## 进程

### 概念

### PCB



### 进程操作

### 进程终止

### 进程上下文切换



### 进程间合作

- 进程间通信IPC

- 同步通信和异步通信

### 进程同步

#### 临界区问题

#### 进程同步算法

#### 信号量

#### 经典同步问题

- 生产者-消费者问题
- 读者-写者问题
- 哲学家就餐问题

### 死锁

#### 死锁发生必要条件

#### 死锁预防

#### 死锁避免

#### 死锁检测和恢复





## CPU调度

### CPU调度器

从内存中一对准备就绪的进程中（就绪队列的就绪进程）选取一个进程，将CPU分配给该进程。

- 抢占式

- 非抢占式

  自愿交出CPU调度权

### CPU分配器

### CPU调度算法

- FCFS（先到先服务）调度算法
- （抢占式和非抢占式）SJF（最短调度时间）算法
- HRN（最大响应比）算法
- 优先权法 可能会导致进程饥饿问题
- 轮转法 时间片大小的选择 响应时间优于SJF
- 多层队列调度

## 线程

- 表达程序运行线索 
- 共享内存空间
- 减少上下文切换开销

## 内存管理

### 页式存储

### 段式存储



## 虚拟存储

### 按需调页

### 缺页中断

### 页面置换

#### 算法

- FIFO算法

- Optimal算法

  置换掉接下去最长时间不被引用的页面，最优算法，但是实际实现不了

- LRU算法

  - 置换最近最长时间不被引用的页面
  - 实现
    - 为每一个页表项设置一个计数器，每次引用页面时，计数器更新为当前的时钟值。调用置换算法时，选取计数器最早的页面换出。
    - 利用堆栈实现，每一次引用一个页面，将页面提到栈顶，则栈底的页面为最长时间未被引用的页面，换出。

- 近似LRU算法-Clock算法

### 页面分配

### 系统抖动

## 文件系统

### FCB

### 虚拟文件系统VFS

### EXT2/3文件系统



### 目录实现

### 磁盘空间分配

- 连续分配

  - 支持随机访问
  - 会产生碎片，不利于空间扩展

- 链接分配

  - 不支持随机访问

  - 太依赖数据块中的指针，要求磁盘设备可靠性好，容易造成数据丢失

- 索引分配

### 磁盘调度

#### 磁盘调度算法

### 磁盘管理

