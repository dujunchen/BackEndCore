# DDD

## 核心概念

### 域、子域、核心域、支撑域、通用域

### 界限上下文

### 实体、聚合、聚合根

#### 实体

- 由唯一标识id和值对象组成，有状态和业务逻辑

#### 值对象

- 不关心唯一性，具有校验，等值判断逻辑，只关心值的类

#### 聚合

- 实体和值对象共同组成聚合，每个聚合内部一般在一个事务中操作（强一致性）
- 聚合和聚合之间只能通过聚合根相互访问，可以使用领域事件实现最终一致性

### 领域服务

- 包括一些不适合直接放在某一个具体的领域实体中的操作

### 领域事件、命令

### 通用语言

### 战略设计

- 围绕子系统设计，关注子系统的划分（界限上下文），交互方式（上下文映射），系统内核心术语定义（通用语言）
- 提取领域名词，动词分析，建立领域模型

### 战术设计

- 用领域模型指导设计和编码实现
- 关注某一个子系统的代码实现，以面向对象的思维设计类的属性和方法



## DDD架构





## 流程

### 战略设计

- 事件风暴（领域故事讲述法）
  - 识别出领域事件，命令（产生领域事件的动作），角色（产生命令的人或者系统）
  - 识别出领域名词，并且业务流程使用流程图串联起来
  - 识别界限上下文以及各上下文之间的关联
  - 识别核心域、支撑域、通用域
- 业务抽象
- 边界划分，构建领域模型

### 战术设计

- 编码实现
  - 识别领域模型中的实体、聚合（根）、值对象以及它们之间关联关系
  - 识别聚合和聚合之间的关系
  - 根据识别出来的领域事件逐个分析每个聚合和实体关联的命令和角色，这个会作为该实体的方法
- 演进重构

## 数据驱动设计和领域驱动设计比较

